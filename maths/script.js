const sampleQuestions = [
    // Calculus
    {
      question: "If f(x) = x³ - 12x + 5, find the sum of all values of 'x' where f'(x) = 0",
      answer: "0"
    },
    {
      question: "The area (in square units) bounded by y = |x| + |x-2| and the x-axis in the interval [0,2] is",
      answer: "4"
    },
    {
      question: "Evaluate: ∫(0 to 1) x⁶(1-x)⁴dx",
      answer: "0.0002"
    },
    {
      question: "If y = arcsin(x) + arccos(x), find the value of y at x = 1/√2",
      answer: "1.5708"
    },
    
    // Vector Algebra
    {
      question: "If a⃗ = 2î + 3ĵ + k̂ and b⃗ = î - 2ĵ + 2k̂, find |a⃗ × b⃗|",
      answer: "7"
    },
    {
      question: "Three vectors of magnitude 3 units each make equal angles with each other. Find the magnitude of their vector sum",
      answer: "9"
    },
    
    // Complex Numbers
    {
      question: "Find the number of complex values of z satisfying |z + 2| + |z - 2| = 8",
      answer: "4"
    },
    {
      question: "If z = 1 + i, find |z⁴ + 1|",
      answer: "4"
    },
    
    // Matrices
    {
      question: "For a 3×3 matrix A, if det(A) = 2 and trace(A) = 3, find det(2A)",
      answer: "16"
    },
    {
      question: "If matrix A = [1 2; 3 4], find the value of det(A²)",
      answer: "100"
    },
    
    // Probability
    {
      question: "A bag contains 4 red and 6 black balls. Two balls are drawn without replacement. Find the probability (in decimals) of drawing both red balls",
      answer: "0.1333"
    },
    {
      question: "In how many ways can 8 identical balls be distributed into 3 distinct boxes?",
      answer: "45"
    },
    
    // Coordinate Geometry
    {
      question: "Find the area of the triangle formed by the points (0,0), (6,0) and (3,4)",
      answer: "12"
    },
    {
      question: "The eccentricity of the ellipse 9x² + 16y² = 144 is",
      answer: "0.75"
    },
    
    // 3D Geometry
    {
      question: "Find the shortest distance between the lines x=2t, y=3t, z=4t and x=1+s, y=2+s, z=3+s",
      answer: "1"
    },
    {
      question: "A cube has vertices at (0,0,0), (1,0,0), (0,1,0), (1,1,0), (0,0,1), (1,0,1), (0,1,1), (1,1,1). Find its volume",
      answer: "1"
    },
    
    // Differential Equations
    {
      question: "Find the value of y(1) if y satisfies dy/dx = x + y, y(0) = 1",
      answer: "4.1487"
    },
    {
      question: "For the differential equation y'' + 4y = 0 with y(0) = 1 and y'(0) = 0, find y(π/4)",
      answer: "0.7071"
    },
    
    // Sequences and Series
    {
      question: "Find the sum of the series 1 + 1/2² + 1/3² + ... + 1/10²",
      answer: "1.5498"
    },
    {
      question: "In an AP, if a₁₀ = 41 and a₂₀ = 81, find a₁",
      answer: "1"
    },
    
    // Limits and Derivatives
    {
      question: "Evaluate: lim(x→0) (1-cos(x))/x²",
      answer: "0.5"
    },
    {
      question: "If f(x) = x³ - 3x² + 4, find the value of x where f'(x) has its minimum value",
      answer: "1"
    },
    
    // Trigonometry
    {
      question: "Find the value of sin(15°)",
      answer: "0.2588"
    },
    {
      question: "If sin(x) + cos(x) = √2, find the maximum value of sin(x)cos(x)",
      answer: "0.5"
    },
    
    // Integration Applications
    {
      question: "Find the volume generated by rotating y = x² from x = 0 to x = 1 about the x-axis",
      answer: "0.6283"
    },
    {
      question: "The area between the curves y = x² and y = x³ from x = 0 to x = 1 is",
      answer: "0.1667"
    },
    
    // Binomial Expansions
    {
      question: "In the expansion of (1 + x)ⁿ, if the coefficients of two consecutive terms are 20 and 15, find n",
      answer: "8"
    },
    {
      question: "Find the coefficient of x⁵ in the expansion of (1 + 2x)¹⁰",
      answer: "1260"
    },
    
    // Logarithms
    {
      question: "Solve for x: log₂(x) + log₂(x-1) = 3",
      answer: "3"
    },
    {
      question: "Find the number of integers x satisfying log₁₀(x) + log₁₀(x+1) < 3",
      answer: "8"
    },
    
    // Permutations & Combinations
    {
      question: "In how many ways can 4 men and 3 women be seated in a row if no two women sit together?",
      answer: "720"
    },
    {
      question: "Find the number of 6-digit numbers divisible by 5 with all digits different",
      answer: "14400"
    },
    
    // Conics
    {
      question: "Find the distance between the foci of the hyperbola 9x² - 16y² = 144",
      answer: "10"
    },
    {
      question: "Find the length of the latus rectum of the parabola y² = 12x",
      answer: "12"
    },
    
    // Quadratic Equations
    {
      question: "If α and β are roots of x² - 5x + 6 = 0, find the value of α³ + β³",
      answer: "35"
    },
    {
      question: "Find the sum of squares of all values of k for which x² + 2kx + k² - 1 = 0 has equal roots",
      answer: "2"
    },
    
    // Definite Integration
    {
      question: "Evaluate: ∫(0 to π/2) sin²(x)cos²(x)dx",
      answer: "0.0625"
    },
    {
      question: "Find the value of ∫(0 to 1) xe^(-x²)dx",
      answer: "0.5"
    },
    
    // Functions
    {
      question: "Find the number of solutions of the equation |x-1| + |x-2| = 3 in the interval [0,3]",
      answer: "2"
    },
    {
      question: "For what value of k is f(x) = |x-1| + k|x+1| minimum at x = 0?",
      answer: "1"
    },
    
    // Statistics
    {
      question: "The mean of 100 observations is 40 and their standard deviation is 2. Find the sum of squares of all observations",
      answer: "161600"
    },
    {
      question: "If the correlation coefficient between x and y is 0.8 and σx = 3, σy = 4, find the value of Σxy/n - x̄ȳ",
      answer: "9.6"
    },
    
    // Determinants
    {
      question: "If det|A| = 2 and det|B| = 3, find det|AB| where A and B are 2×2 matrices",
      answer: "6"
    },
    {
      question: "Find the value of determinant |1 2 3; 0 4 5; 0 0 6|",
      answer: "24"
    },
    
    // Mathematical Reasoning
    {
      question: "If n is a positive integer, find the number of solutions to ⌊x⌋ + ⌊x+1⌋ + ⌊x+2⌋ = n where ⌊x⌋ represents floor function",
      answer: "3"
    },
    {
      question: "How many functions f: {1,2,3,4} → {1,2,3,4} satisfy f(f(x)) = x for all x?",
      answer: "10"
    },
    
    // Mathematical Induction
    {
      question: "Find the remainder when 7^100 is divided by 8",
      answer: "1"
    },
    {
      question: "Find the units digit of 999^999",
      answer: "9"
    },
    
    // Continuity and Differentiability
    {
      question: "At x = 1, if f'(x) = 2x + 3 and f''(x) = 2, find the value of f(1.1) given f(1) = 5",
      answer: "5.52"
    },
    {
      question: "If f(x) = |x-1| + |x-2| + |x-3|, find the minimum value of f(x)",
      answer: "2"
    },
    
    // Circle Problems
    {
      question: "Find the area of the region common to two circles of radius 5 units whose centers are 6 units apart",
      answer: "28.74"
    },
    {
      question: "Three circles of radius 3 units touch each other externally. Find the area of the region bounded by them",
      answer: "11.51"
    }
  ];
  
  // Example usage:
//   console.log(JSON.stringify(jeeNumericalQuestions, null, 2));
let currentQuestion = null;
let lastQuestionDate = null;

// Cookie management functions
function setCookie(name, value, days) {
    try {
        const date = new Date();
        date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
        const expires = `expires=${date.toUTCString()}`;
        document.cookie = `${name}=${value};${expires};path=/`;
    } catch (e) {
        console.log('Cookie set failed:', e);
    }
}

function getCookie(name) {
    try {
        const match = document.cookie.match(new RegExp('(^| )' + name + '=([^;]+)'));
        if (match) return match[2];
    } catch (e) {
        console.log('Cookie get failed:', e);
    }
    return null;
}

// Get deterministic question based on date
function getQuestionForDate(dateString) {
    const date = new Date(dateString);
    const seed = date.getFullYear() * 10000 + (date.getMonth() + 1) * 100 + date.getDate();
    return sampleQuestions[seed % sampleQuestions.length];
}

function getTodayString() {
    const now = new Date();
    return now.toISOString().split('T')[0];
}

function updateTimer() {
    const now = new Date();
    const tomorrow = new Date(now);
    tomorrow.setDate(tomorrow.getDate() + 1);
    tomorrow.setHours(0, 0, 0, 0);
    
    const timeLeft = tomorrow - now;
    const hours = Math.floor(timeLeft / (1000 * 60 * 60));
    const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
    
    document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
    document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
    document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
}

function loadQuestion() {
    const today = getTodayString();
    
    // Always get today's question
    currentQuestion = getQuestionForDate(today);
    lastQuestionDate = today;

    // Update the display
    const questionElement = document.getElementById('question');
    questionElement.textContent = currentQuestion.question;
    questionElement.classList.remove('loading');

    // Load saved answer if exists
    const savedAnswer = getCookie('userAnswer');
    if (savedAnswer) {
        document.getElementById('answer').value = savedAnswer;
        checkAnswer(true);
    }
}

// function createConfetti() {
//     const colors = ['#ff0000', '#00ff00', '#0000ff', '#ffff00', '#ff00ff', '#00ffff'];
//     for (let i = 0; i < 50; i++) {
//         const confetti = document.createElement('div');
//         confetti.className = 'confetti';
//         confetti.style.left = Math.random() * 100 + 'vw';
//         confetti.style.animationDelay = Math.random() * 2 + 's';
//         confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
//         document.body.appendChild(confetti);
//         setTimeout(() => confetti.remove(), 5000);
//     }
// }

function checkAnswer(silent = false) {
    const userAnswer = document.getElementById('answer').value.trim();
    const resultDiv = document.getElementById('result');
    
    setCookie('userAnswer', userAnswer, 1);
    
    if (!silent) {
        resultDiv.style.display = 'block';
    }
    
    if (userAnswer.toLowerCase() === currentQuestion.answer.toLowerCase()) {
        resultDiv.innerHTML = "🎉 Correct! Well done! 🎉";
        resultDiv.className = "result correct";
        if (!silent) {
            createConfetti();
        }
        setCookie('completed', 'true', 1);
    } else {
        resultDiv.innerHTML = "❌ Incorrect. Try again!";
        resultDiv.className = "result incorrect";
        if (!silent) {
            resultDiv.style.animation = 'none';
            resultDiv.offsetHeight;
            resultDiv.style.animation = null;
        }
    }
}

// Add input event listener
document.getElementById('answer').addEventListener('input', function(e) {
    setCookie('userAnswer', e.target.value, 1);
});

// Add enter key support
document.getElementById('answer').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        checkAnswer();
    }
});

// Initialize the app
window.onload = function() {
    loadQuestion();
    updateTimer();
    setInterval(updateTimer, 1000);
    
    // Check for new day every minute
    setInterval(() => {
        const currentDate = getTodayString();
        if (currentDate !== lastQuestionDate) {
            loadQuestion();
        }
    }, 60000);
};